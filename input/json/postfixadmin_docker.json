{"docker":[{"name":"FROM","lineno":1,"args":"php:7.3-apache","raw":"FROM php:7.3-apache"},{"name":"LABEL","lineno":2,"args":{"maintainer":"\"David Goodwin <david@codepoets.co.uk> (@DavidGoodwin)\""},"raw":"LABEL maintainer=\"David Goodwin <david@codepoets.co.uk> (@DavidGoodwin)\""},{"name":"RUN","lineno":23,"args":"set -ex; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \t\tapt-get update; \tapt-get install -y --no-install-recommends \tlibpq-dev \tlibsqlite3-dev \t; \t\tdocker-php-ext-install -j \"$(nproc)\" \t\tmysqli \t\tpdo_mysql \t\tpdo_pgsql \t\tpdo_sqlite \t\tpgsql \t; \t# reset apt-mark's \"manual\" list so that \"purge --auto-remove\" will remove all build dependencies","raw":"RUN set -ex; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \t\tapt-get update; \tapt-get install -y --no-install-recommends \tlibpq-dev \tlibsqlite3-dev \t; \t\tdocker-php-ext-install -j \"$(nproc)\" \t\tmysqli \t\tpdo_mysql \t\tpdo_pgsql \t\tpdo_sqlite \t\tpgsql \t; \t# reset apt-mark's \"manual\" list so that \"purge --auto-remove\" will remove all build dependencies"},{"name":"APT-MARK","lineno":35,"args":"auto '.*' > /dev/null; \tapt-mark manual $savedAptMark; \t\tldd \"$(php -r 'echo ini_get(\"extension_dir\");')\"/*.so \t\t| awk '/=>/ { print $3 }' \t\t| sort -u \t\t| xargs -r dpkg-query -S \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -rt apt-mark manual; \t\t\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*","raw":"apt-mark auto '.*' > /dev/null; \tapt-mark manual $savedAptMark; \t\tldd \"$(php -r 'echo ini_get(\"extension_dir\");')\"/*.so \t\t| awk '/=>/ { print $3 }' \t\t| sort -u \t\t| xargs -r dpkg-query -S \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -rt apt-mark manual; \t\t\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*"},{"name":"ARG","lineno":37,"args":["POSTFIXADMIN_VERSION=3.2.3"],"raw":"ARG POSTFIXADMIN_VERSION=3.2.3"},{"name":"ARG","lineno":38,"args":["POSTFIXADMIN_SHA512=d44addb9a3ca830caf55b603363054df561d659957f21cab7523465ebf02ca18abe7fcf298fe718d957d0b7bf5613e2dde69c78c26e0f7f6f595d79b28fe08ab"],"raw":"ARG POSTFIXADMIN_SHA512=d44addb9a3ca830caf55b603363054df561d659957f21cab7523465ebf02ca18abe7fcf298fe718d957d0b7bf5613e2dde69c78c26e0f7f6f595d79b28fe08ab"},{"name":"ENV","lineno":40,"args":{"POSTFIXADMIN_VERSION":"$POSTFIXADMIN_VERSION"},"raw":"ENV POSTFIXADMIN_VERSION $POSTFIXADMIN_VERSION"},{"name":"ENV","lineno":41,"args":{"POSTFIXADMIN_SHA512":"$POSTFIXADMIN_SHA512"},"raw":"ENV POSTFIXADMIN_SHA512 $POSTFIXADMIN_SHA512"},{"name":"ENV","lineno":42,"args":{"APACHE_DOCUMENT_ROOT":"/var/www/html/public"},"raw":"ENV APACHE_DOCUMENT_ROOT /var/www/html/public"},{"name":"RUN","lineno":45,"args":"set -eu; sed -ri -e 's!/var/www/html!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/sites-available/*.conf; \tsed -ri -e 's!/var/www/!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/apache2.conf /etc/apache2/conf-available/*.conf","raw":"RUN set -eu; sed -ri -e 's!/var/www/html!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/sites-available/*.conf; \tsed -ri -e 's!/var/www/!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/apache2.conf /etc/apache2/conf-available/*.conf"},{"name":"RUN","lineno":50,"args":"set -eu; \tcurl -fsSL -o postfixadmin.tar.gz \"https://github.com/postfixadmin/postfixadmin/archive/postfixadmin-${POSTFIXADMIN_VERSION}.tar.gz\"; \techo \"$POSTFIXADMIN_SHA512 *postfixadmin.tar.gz\" | sha512sum -c -; \t# upstream tarball include ./postfixadmin-postfixadmin-${POSTFIXADMIN_VERSION}/","raw":"RUN set -eu; \tcurl -fsSL -o postfixadmin.tar.gz \"https://github.com/postfixadmin/postfixadmin/archive/postfixadmin-${POSTFIXADMIN_VERSION}.tar.gz\"; \techo \"$POSTFIXADMIN_SHA512 *postfixadmin.tar.gz\" | sha512sum -c -; \t# upstream tarball include ./postfixadmin-postfixadmin-${POSTFIXADMIN_VERSION}/"},{"name":"MKDIR","lineno":54,"args":"/usr/src/postfixadmin; \ttar -xf postfixadmin.tar.gz -C /usr/src/postfixadmin --strip-components=1; \trm postfixadmin.tar.gz; \t# Does not exist in tarball but is required","raw":"mkdir /usr/src/postfixadmin; \ttar -xf postfixadmin.tar.gz -C /usr/src/postfixadmin --strip-components=1; \trm postfixadmin.tar.gz; \t# Does not exist in tarball but is required"},{"name":"MKDIR","lineno":56,"args":"-p /usr/src/postfixadmin/templates_c; \tchown -R www-data:www-data /usr/src/postfixadmin","raw":"mkdir -p /usr/src/postfixadmin/templates_c; \tchown -R www-data:www-data /usr/src/postfixadmin"},{"name":"COPY","lineno":58,"args":["docker-entrypoint.sh","/usr/local/bin/"],"raw":"COPY docker-entrypoint.sh /usr/local/bin/"},{"name":"ENTRYPOINT","lineno":60,"args":["/usr/local/bin/docker-entrypoint.sh"],"raw":"ENTRYPOINT [\"/usr/local/bin/docker-entrypoint.sh\"]"},{"name":"CMD","lineno":61,"args":["apache2-foreground"],"raw":"CMD [\"apache2-foreground\"]"}]}