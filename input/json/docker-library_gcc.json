{"docker":[{"name":"FROM","lineno":1,"args":"buildpack-deps:buster","raw":"FROM buildpack-deps:buster"},{"name":"RUN","lineno":11,"args":"set -ex; \tif ! command -v gpg > /dev/null; then \t\tapt-get update; \t\tapt-get install -y --no-install-recommends \t\t\tgnupg \t\t\tdirmngr \t\t; \t\trm -rf /var/lib/apt/lists/*; \tfi","raw":"RUN set -ex; \tif ! command -v gpg > /dev/null; then \t\tapt-get update; \t\tapt-get install -y --no-install-recommends \t\t\tgnupg \t\t\tdirmngr \t\t; \t\trm -rf /var/lib/apt/lists/*; \tfi"},{"name":"ENV","lineno":15,"args":{"GPG_KEYS":"# 1024D/745C015A 1999-11-09 Gerald Pfeifer <gerald@pfeifer.com>"},"raw":"ENV GPG_KEYS # 1024D/745C015A 1999-11-09 Gerald Pfeifer <gerald@pfeifer.com>"},{"name":"B215C1633BCA0477615F1B35A5B3A004745C015A","lineno":17,"args":"# 1024D/B75C61B8 2003-04-10 Mark Mitchell <mark@codesourcery.com>","raw":"B215C1633BCA0477615F1B35A5B3A004745C015A # 1024D/B75C61B8 2003-04-10 Mark Mitchell <mark@codesourcery.com>"},{"name":"B3C42148A44E6983B3E4CC0793FA9B1AB75C61B8","lineno":19,"args":"# 1024D/902C9419 2004-12-06 Gabriel Dos Reis <gdr@acm.org>","raw":"B3C42148A44E6983B3E4CC0793FA9B1AB75C61B8 # 1024D/902C9419 2004-12-06 Gabriel Dos Reis <gdr@acm.org>"},{"name":"90AA470469D3965A87A5DCB494D03953902C9419","lineno":21,"args":"# 1024D/F71EDF1C 2000-02-13 Joseph Samuel Myers <jsm@polyomino.org.uk>","raw":"90AA470469D3965A87A5DCB494D03953902C9419 # 1024D/F71EDF1C 2000-02-13 Joseph Samuel Myers <jsm@polyomino.org.uk>"},{"name":"80F98B2E0DAB6C8281BDF541A7C8C3B2F71EDF1C","lineno":23,"args":"# 2048R/FC26A641 2005-09-13 Richard Guenther <richard.guenther@gmail.com>","raw":"80F98B2E0DAB6C8281BDF541A7C8C3B2F71EDF1C # 2048R/FC26A641 2005-09-13 Richard Guenther <richard.guenther@gmail.com>"},{"name":"7F74F97C103468EE5D750B583AB00996FC26A641","lineno":25,"args":"# 1024D/C3C45C06 2004-04-21 Jakub Jelinek <jakub@redhat.com>","raw":"7F74F97C103468EE5D750B583AB00996FC26A641 # 1024D/C3C45C06 2004-04-21 Jakub Jelinek <jakub@redhat.com>"},{"name":"33C235A34C46AA3FFB293709A328C3A2C3C45C06","lineno":26,"args":"","raw":"33C235A34C46AA3FFB293709A328C3A2C3C45C06"},{"name":"RUN","lineno":30,"args":"set -ex; \tfor key in $GPG_KEYS; do \t\tgpg --batch --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\"; \tdone","raw":"RUN set -ex; \tfor key in $GPG_KEYS; do \t\tgpg --batch --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\"; \tdone"},{"name":"ENV","lineno":38,"args":{"GCC_MIRRORS":"https://ftpmirror.gnu.org/gcc https://bigsearcher.com/mirrors/gcc/releases https://mirrors-usa.go-parts.com/gcc/releases https://mirrors.concertpass.com/gcc/releases http://www.netgull.com/gcc/releases"},"raw":"ENV GCC_MIRRORS \t\thttps://ftpmirror.gnu.org/gcc \t\thttps://bigsearcher.com/mirrors/gcc/releases \t\thttps://mirrors-usa.go-parts.com/gcc/releases \t\thttps://mirrors.concertpass.com/gcc/releases \t\thttp://www.netgull.com/gcc/releases"},{"name":"ENV","lineno":41,"args":{"GCC_VERSION":"8.4.0"},"raw":"ENV GCC_VERSION 8.4.0"},{"name":"RUN","lineno":67,"args":"set -ex; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tdpkg-dev \t\tflex \t; \trm -r /var/lib/apt/lists/*; \t\t_fetch() { \t\tlocal fetch=\"$1\"; shift; \t\tlocal file=\"$1\"; shift; \t\tfor mirror in $GCC_MIRRORS; do \t\t\tif curl -fL \"$mirror/$fetch\" -o \"$file\"; then \t\t\t\treturn 0; \t\t\tfi; \t\tdone; \t\techo >&2 \"error: failed to download '$fetch' from several mirrors\"; \t\treturn 1; \t}; \t\t_fetch \"gcc-$GCC_VERSION/gcc-$GCC_VERSION.tar.xz.sig\" 'gcc.tar.xz.sig' # 6.5.0 (https://mirrors.kernel.org/gnu/gcc/6.5.0/), no gcc- prefix","raw":"RUN set -ex; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tdpkg-dev \t\tflex \t; \trm -r /var/lib/apt/lists/*; \t\t_fetch() { \t\tlocal fetch=\"$1\"; shift; \t\tlocal file=\"$1\"; shift; \t\tfor mirror in $GCC_MIRRORS; do \t\t\tif curl -fL \"$mirror/$fetch\" -o \"$file\"; then \t\t\t\treturn 0; \t\t\tfi; \t\tdone; \t\techo >&2 \"error: failed to download '$fetch' from several mirrors\"; \t\treturn 1; \t}; \t\t_fetch \"gcc-$GCC_VERSION/gcc-$GCC_VERSION.tar.xz.sig\" 'gcc.tar.xz.sig' # 6.5.0 (https://mirrors.kernel.org/gnu/gcc/6.5.0/), no gcc- prefix"},{"name":"||","lineno":78,"args":"_fetch \"$GCC_VERSION/gcc-$GCC_VERSION.tar.xz.sig\"; \t_fetch \"gcc-$GCC_VERSION/gcc-$GCC_VERSION.tar.xz\" 'gcc.tar.xz' \t\t|| _fetch \"$GCC_VERSION/gcc-$GCC_VERSION.tar.xz\" 'gcc.tar.xz'; \tgpg --batch --verify gcc.tar.xz.sig gcc.tar.xz; \tmkdir -p /usr/src/gcc; \ttar -xf gcc.tar.xz -C /usr/src/gcc --strip-components=1; \trm gcc.tar.xz*; \t\tcd /usr/src/gcc; \t# \"download_prerequisites\" pulls down a bunch of tarballs and extracts them,","raw":"|| _fetch \"$GCC_VERSION/gcc-$GCC_VERSION.tar.xz.sig\"; \t_fetch \"gcc-$GCC_VERSION/gcc-$GCC_VERSION.tar.xz\" 'gcc.tar.xz' \t\t|| _fetch \"$GCC_VERSION/gcc-$GCC_VERSION.tar.xz\" 'gcc.tar.xz'; \tgpg --batch --verify gcc.tar.xz.sig gcc.tar.xz; \tmkdir -p /usr/src/gcc; \ttar -xf gcc.tar.xz -C /usr/src/gcc --strip-components=1; \trm gcc.tar.xz*; \t\tcd /usr/src/gcc; \t# \"download_prerequisites\" pulls down a bunch of tarballs and extracts them,"},{"name":"./CONTRIB/DOWNLOAD_PREREQUISITES;","lineno":83,"args":"{ rm *.tar.* || true; }; \t# explicitly update autoconf config.guess and config.sub so they support more arches/libcs","raw":"./contrib/download_prerequisites; \t{ rm *.tar.* || true; }; \t# explicitly update autoconf config.guess and config.sub so they support more arches/libcs"},{"name":"FOR","lineno":85,"args":"f in config.guess config.sub; do \t\twget -O \"$f\" \"https://git.savannah.gnu.org/cgit/config.git/plain/$f","raw":"for f in config.guess config.sub; do \t\twget -O \"$f\" \"https://git.savannah.gnu.org/cgit/config.git/plain/$f"},{"name":"ID=7D3D27BAF8107B630586C962C057E22149653DEB\";","lineno":87,"args":"# find any more (shallow) copies of the file we grabbed and update them too","raw":"id=7d3d27baf8107b630586c962c057e22149653deb\"; # find any more (shallow) copies of the file we grabbed and update them too"},{"name":"FIND","lineno":97,"args":"-mindepth 2 -name \"$f\" -exec cp -v \"$f\" '{}' ';'; \tdone; \t\tdir=\"$(mktemp -d)\"; \tcd \"$dir\"; \t\textraConfigureArgs=''; \tdpkgArch=\"$(dpkg --print-architecture)\"; \tcase \"$dpkgArch\" in # with-arch: https://anonscm.debian.org/viewvc/gcccvs/branches/sid/gcc-6/debian/rules2","raw":"find -mindepth 2 -name \"$f\" -exec cp -v \"$f\" '{}' ';'; \tdone; \t\tdir=\"$(mktemp -d)\"; \tcd \"$dir\"; \t\textraConfigureArgs=''; \tdpkgArch=\"$(dpkg --print-architecture)\"; \tcase \"$dpkgArch\" in # with-arch: https://anonscm.debian.org/viewvc/gcccvs/branches/sid/gcc-6/debian/rules2"},{"name":"REVISION=9450&VIEW=MARKUP#L491","lineno":98,"args":"","raw":"revision=9450&view=markup#l491"},{"name":"REVISION=9487&VIEW=MARKUP#L416","lineno":100,"args":"","raw":"revision=9487&view=markup#l416"},{"name":"REVISION=9487&VIEW=MARKUP#L376","lineno":102,"args":"","raw":"revision=9487&view=markup#l376"},{"name":"ARMEL)","lineno":110,"args":"extraConfigureArgs=\"$extraConfigureArgs --with-arch=armv4t --with-float=soft\" \t\t\t;; \t\tarmhf) \t\t\textraConfigureArgs=\"$extraConfigureArgs --with-arch=armv7-a --with-float=hard --with-fpu=vfpv3-d16 --with-mode=thumb\" \t\t\t;; \t\t# with-arch-32: https://anonscm.debian.org/viewvc/gcccvs/branches/sid/gcc-6/debian/rules2","raw":"armel) \t\t\textraConfigureArgs=\"$extraConfigureArgs --with-arch=armv4t --with-float=soft\" \t\t\t;; \t\tarmhf) \t\t\textraConfigureArgs=\"$extraConfigureArgs --with-arch=armv7-a --with-float=hard --with-fpu=vfpv3-d16 --with-mode=thumb\" \t\t\t;; \t\t# with-arch-32: https://anonscm.debian.org/viewvc/gcccvs/branches/sid/gcc-6/debian/rules2"},{"name":"REVISION=9450&VIEW=MARKUP#L590","lineno":111,"args":"","raw":"revision=9450&view=markup#l590"},{"name":"I386)","lineno":118,"args":"osVersionID=\"$(set -e; . /etc/os-release; echo \"$VERSION_ID\")\"; \t\t\tcase \"$osVersionID\" in \t\t\t\t8) extraConfigureArgs=\"$extraConfigureArgs --with-arch-32=i586\" ;; \t\t\t\t*) extraConfigureArgs=\"$extraConfigureArgs --with-arch-32=i686\" ;; \t\t\tesac; # TODO for some reason, libgo + i386 fails on https://github.com/gcc-mirror/gcc/blob/gcc-7_1_0-release/libgo/runtime/proc.c#L154","raw":"i386) \t\t\tosVersionID=\"$(set -e; . /etc/os-release; echo \"$VERSION_ID\")\"; \t\t\tcase \"$osVersionID\" in \t\t\t\t8) extraConfigureArgs=\"$extraConfigureArgs --with-arch-32=i586\" ;; \t\t\t\t*) extraConfigureArgs=\"$extraConfigureArgs --with-arch-32=i686\" ;; \t\t\tesac; # TODO for some reason, libgo + i386 fails on https://github.com/gcc-mirror/gcc/blob/gcc-7_1_0-release/libgo/runtime/proc.c#L154"},{"name":";;","lineno":139,"args":"esac; \t\tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \t/usr/src/gcc/configure \t\t--build=\"$gnuArch\" \t\t--disable-multilib \t\t--enable-languages=c,c++,fortran,go \t\t$extraConfigureArgs \t; \tmake -j \"$(nproc)\"; \tmake install-strip; \t\tcd ..; \t\trm -rf \"$dir\" /usr/src/gcc; \t\tapt-mark auto '.*' > /dev/null; \t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false","raw":";; \tesac; \t\tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \t/usr/src/gcc/configure \t\t--build=\"$gnuArch\" \t\t--disable-multilib \t\t--enable-languages=c,c++,fortran,go \t\t$extraConfigureArgs \t; \tmake -j \"$(nproc)\"; \tmake install-strip; \t\tcd ..; \t\trm -rf \"$dir\" /usr/src/gcc; \t\tapt-mark auto '.*' > /dev/null; \t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false"},{"name":"RUN","lineno":144,"args":"set -ex; \techo '/usr/local/lib64' > /etc/ld.so.conf.d/local-lib64.conf; \tldconfig -v","raw":"RUN set -ex; \techo '/usr/local/lib64' > /etc/ld.so.conf.d/local-lib64.conf; \tldconfig -v"},{"name":"RUN","lineno":151,"args":"set -ex; \tdpkg-divert --divert /usr/bin/gcc.orig --rename /usr/bin/gcc; \tdpkg-divert --divert /usr/bin/g++.orig --rename /usr/bin/g++; \tdpkg-divert --divert /usr/bin/gfortran.orig --rename /usr/bin/gfortran; \tupdate-alternatives --install /usr/bin/cc cc /usr/local/bin/gcc 999","raw":"RUN set -ex; \tdpkg-divert --divert /usr/bin/gcc.orig --rename /usr/bin/gcc; \tdpkg-divert --divert /usr/bin/g++.orig --rename /usr/bin/g++; \tdpkg-divert --divert /usr/bin/gfortran.orig --rename /usr/bin/gfortran; \tupdate-alternatives --install /usr/bin/cc cc /usr/local/bin/gcc 999"}]}