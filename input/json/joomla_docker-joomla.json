{"docker":[{"name":"FROM","lineno":1,"args":"php:7.4-apache","raw":"FROM php:7.4-apache"},{"name":"LABEL","lineno":2,"args":{"maintainer":"\"Michael Babker <michael.babker@joomla.org> (@mbabker)\""},"raw":"LABEL maintainer=\"Michael Babker <michael.babker@joomla.org> (@mbabker)\""},{"name":"ENV","lineno":5,"args":{"JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK":"1"},"raw":"ENV JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK=1"},{"name":"RUN","lineno":8,"args":"a2enmod rewrite","raw":"RUN a2enmod rewrite"},{"name":"RUN","lineno":40,"args":"set -ex; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \t\tapt-get update; \tapt-get install -y --no-install-recommends \t\tlibbz2-dev \t\tlibjpeg-dev \t\tlibldap2-dev \t\tlibmemcached-dev \t\tlibpng-dev \t\tlibpq-dev \t\tlibzip-dev \t; \t\tdocker-php-ext-configure gd --with-jpeg; \tdebMultiarch=\"$(dpkg-architecture --query DEB_BUILD_MULTIARCH)\"; \tdocker-php-ext-configure ldap --with-libdir=\"lib/$debMultiarch\"; \tdocker-php-ext-install -j \"$(nproc)\" \t\tbz2 \t\tgd \t\tldap \t\tmysqli \t\tpdo_mysql \t\tpdo_pgsql \t\tpgsql \t\tzip \t; \t# pecl will claim success even if one install fails, so we need to perform each install separately","raw":"RUN set -ex; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \t\tapt-get update; \tapt-get install -y --no-install-recommends \t\tlibbz2-dev \t\tlibjpeg-dev \t\tlibldap2-dev \t\tlibmemcached-dev \t\tlibpng-dev \t\tlibpq-dev \t\tlibzip-dev \t; \t\tdocker-php-ext-configure gd --with-jpeg; \tdebMultiarch=\"$(dpkg-architecture --query DEB_BUILD_MULTIARCH)\"; \tdocker-php-ext-configure ldap --with-libdir=\"lib/$debMultiarch\"; \tdocker-php-ext-install -j \"$(nproc)\" \t\tbz2 \t\tgd \t\tldap \t\tmysqli \t\tpdo_mysql \t\tpdo_pgsql \t\tpgsql \t\tzip \t; \t# pecl will claim success even if one install fails, so we need to perform each install separately"},{"name":"PECL","lineno":51,"args":"install APCu-5.1.18; \tpecl install memcached-3.1.5; \tpecl install redis-4.3.0; \t\tdocker-php-ext-enable \t\tapcu \t\tmemcached \t\tredis \t; \t# reset apt-mark's \"manual\" list so that \"purge --auto-remove\" will remove all build dependencies","raw":"pecl install APCu-5.1.18; \tpecl install memcached-3.1.5; \tpecl install redis-4.3.0; \t\tdocker-php-ext-enable \t\tapcu \t\tmemcached \t\tredis \t; \t# reset apt-mark's \"manual\" list so that \"purge --auto-remove\" will remove all build dependencies"},{"name":"APT-MARK","lineno":63,"args":"auto '.*' > /dev/null; \tapt-mark manual $savedAptMark; \tldd \"$(php -r 'echo ini_get(\"extension_dir\");')\"/*.so \t\t| awk '/=>/ { print $3 }' \t\t| sort -u \t\t| xargs -r dpkg-query -S \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -rt apt-mark manual; \t\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*","raw":"apt-mark auto '.*' > /dev/null; \tapt-mark manual $savedAptMark; \tldd \"$(php -r 'echo ini_get(\"extension_dir\");')\"/*.so \t\t| awk '/=>/ { print $3 }' \t\t| sort -u \t\t| xargs -r dpkg-query -S \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -rt apt-mark manual; \t\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*"},{"name":"VOLUME","lineno":65,"args":["/var/www/html"],"raw":"VOLUME /var/www/html"},{"name":"ENV","lineno":68,"args":{"JOOMLA_VERSION":"3.9.16"},"raw":"ENV JOOMLA_VERSION 3.9.16"},{"name":"ENV","lineno":69,"args":{"JOOMLA_SHA512":"3266ff375631fd0c4c45c66368f3d07cdc1b41010ffad907a957e6c1acb511847bf2c112e0991792f84455b48bea95c84eca9a7325baa3cab61078fda697ed0f"},"raw":"ENV JOOMLA_SHA512 3266ff375631fd0c4c45c66368f3d07cdc1b41010ffad907a957e6c1acb511847bf2c112e0991792f84455b48bea95c84eca9a7325baa3cab61078fda697ed0f"},{"name":"RUN","lineno":78,"args":"set -ex; \tcurl -o joomla.tar.bz2 -SL https://github.com/joomla/joomla-cms/releases/download/${JOOMLA_VERSION}/Joomla_${JOOMLA_VERSION}-Stable-Full_Package.tar.bz2; \techo \"$JOOMLA_SHA512 *joomla.tar.bz2\" | sha512sum -c -; \tmkdir /usr/src/joomla; \ttar -xf joomla.tar.bz2 -C /usr/src/joomla; \trm joomla.tar.bz2; \tchown -R www-data:www-data /usr/src/joomla","raw":"RUN set -ex; \tcurl -o joomla.tar.bz2 -SL https://github.com/joomla/joomla-cms/releases/download/${JOOMLA_VERSION}/Joomla_${JOOMLA_VERSION}-Stable-Full_Package.tar.bz2; \techo \"$JOOMLA_SHA512 *joomla.tar.bz2\" | sha512sum -c -; \tmkdir /usr/src/joomla; \ttar -xf joomla.tar.bz2 -C /usr/src/joomla; \trm joomla.tar.bz2; \tchown -R www-data:www-data /usr/src/joomla"},{"name":"COPY","lineno":81,"args":["docker-entrypoint.sh","/entrypoint.sh"],"raw":"COPY docker-entrypoint.sh /entrypoint.sh"},{"name":"COPY","lineno":82,"args":["makedb.php","/makedb.php"],"raw":"COPY makedb.php /makedb.php"},{"name":"ENTRYPOINT","lineno":84,"args":["/entrypoint.sh"],"raw":"ENTRYPOINT [\"/entrypoint.sh\"]"},{"name":"CMD","lineno":85,"args":["apache2-foreground"],"raw":"CMD [\"apache2-foreground\"]"}]}