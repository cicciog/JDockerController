{"docker":[{"name":"FROM","lineno":1,"args":"debian:buster-slim","raw":"FROM debian:buster-slim"},{"name":"RUN","lineno":12,"args":"set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tca-certificates \t\tlibdatetime-perl \t\tlibwww-perl \t\tperl \t\twget \t; \trm -rf /var/lib/apt/lists/*","raw":"RUN set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tca-certificates \t\tlibdatetime-perl \t\tlibwww-perl \t\tperl \t\twget \t; \trm -rf /var/lib/apt/lists/*"},{"name":"ENV","lineno":14,"args":{"HOME":"/home/user"},"raw":"ENV HOME /home/user"},{"name":"RUN","lineno":18,"args":"set -eux; \tuseradd --create-home --home-dir \"$HOME\" user; \tmkdir \"$HOME/.irssi\"; \tchown -R user:user \"$HOME\"","raw":"RUN set -eux; \tuseradd --create-home --home-dir \"$HOME\" user; \tmkdir \"$HOME/.irssi\"; \tchown -R user:user \"$HOME\""},{"name":"ENV","lineno":20,"args":{"LANG":"C.UTF-8"},"raw":"ENV LANG C.UTF-8"},{"name":"ENV","lineno":22,"args":{"IRSSI_VERSION":"1.2.2"},"raw":"ENV IRSSI_VERSION 1.2.2"},{"name":"RUN","lineno":50,"args":"set -eux; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tautoconf \t\tautomake \t\tbzip2 \t\tdirmngr \t\tdpkg-dev \t\tgnupg \t\tlibglib2.0-dev \t\tlibncurses-dev \t\tlibperl-dev \t\tlibssl-dev \t\tlibtool \t\tlynx \t\tmake \t\tpkg-config \t\txz-utils \t; \trm -rf /var/lib/apt/lists/*; \t\twget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz\" -O /tmp/irssi.tar.xz; \twget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz.asc\" -O /tmp/irssi.tar.xz.asc; \texport GNUPGHOME=\"$(mktemp -d)\"; # gpg: key DDBEF0E1: public key \"The Irssi project <staff@irssi.org>\" imported","raw":"RUN set -eux; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tautoconf \t\tautomake \t\tbzip2 \t\tdirmngr \t\tdpkg-dev \t\tgnupg \t\tlibglib2.0-dev \t\tlibncurses-dev \t\tlibperl-dev \t\tlibssl-dev \t\tlibtool \t\tlynx \t\tmake \t\tpkg-config \t\txz-utils \t; \trm -rf /var/lib/apt/lists/*; \t\twget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz\" -O /tmp/irssi.tar.xz; \twget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz.asc\" -O /tmp/irssi.tar.xz.asc; \texport GNUPGHOME=\"$(mktemp -d)\"; # gpg: key DDBEF0E1: public key \"The Irssi project <staff@irssi.org>\" imported"},{"name":"GPG","lineno":87,"args":"--batch --keyserver ha.pool.sks-keyservers.net --recv-keys 7EE65E3082A5FB06AC7C368D00CCB587DDBEF0E1; \tgpg --batch --verify /tmp/irssi.tar.xz.asc /tmp/irssi.tar.xz; \tgpgconf --kill all; \trm -rf \"$GNUPGHOME\" /tmp/irssi.tar.xz.asc; \t\tmkdir -p /usr/src/irssi; \ttar -xf /tmp/irssi.tar.xz -C /usr/src/irssi --strip-components 1; \trm /tmp/irssi.tar.xz; \t\tcd /usr/src/irssi; \tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \t./configure \t\t--build=\"$gnuArch\" \t\t--enable-true-color \t\t--with-bot \t\t--with-proxy \t\t--with-socks \t; \tmake -j \"$(nproc)\"; \tmake install; \t\tcd /; \trm -rf /usr/src/irssi; \t\tapt-mark auto '.*' > /dev/null; \tapt-mark manual $savedAptMark; \tfind /usr/local -type f -executable -exec ldd '{}' ';' \t\t| awk '/=>/ { print $(NF-1) }' \t\t| sort -u \t\t| xargs -r dpkg-query --search \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -r apt-mark manual \t; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \t# basic smoke test","raw":"gpg --batch --keyserver ha.pool.sks-keyservers.net --recv-keys 7EE65E3082A5FB06AC7C368D00CCB587DDBEF0E1; \tgpg --batch --verify /tmp/irssi.tar.xz.asc /tmp/irssi.tar.xz; \tgpgconf --kill all; \trm -rf \"$GNUPGHOME\" /tmp/irssi.tar.xz.asc; \t\tmkdir -p /usr/src/irssi; \ttar -xf /tmp/irssi.tar.xz -C /usr/src/irssi --strip-components 1; \trm /tmp/irssi.tar.xz; \t\tcd /usr/src/irssi; \tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \t./configure \t\t--build=\"$gnuArch\" \t\t--enable-true-color \t\t--with-bot \t\t--with-proxy \t\t--with-socks \t; \tmake -j \"$(nproc)\"; \tmake install; \t\tcd /; \trm -rf /usr/src/irssi; \t\tapt-mark auto '.*' > /dev/null; \tapt-mark manual $savedAptMark; \tfind /usr/local -type f -executable -exec ldd '{}' ';' \t\t| awk '/=>/ { print $(NF-1) }' \t\t| sort -u \t\t| xargs -r dpkg-query --search \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -r apt-mark manual \t; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \t# basic smoke test"},{"name":"IRSSI","lineno":88,"args":"--version","raw":"irssi --version"},{"name":"WORKDIR","lineno":90,"args":"$HOME","raw":"WORKDIR $HOME"},{"name":"USER","lineno":92,"args":"user","raw":"USER user"},{"name":"CMD","lineno":93,"args":["irssi"],"raw":"CMD [\"irssi\"]"}]}