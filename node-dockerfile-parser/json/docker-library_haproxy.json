{"docker":[{"name":"FROM","lineno":2,"args":"debian:buster-slim","raw":"FROM debian:buster-slim"},{"name":"ENV","lineno":4,"args":{"HAPROXY_VERSION":"1.9.14"},"raw":"ENV HAPROXY_VERSION 1.9.14"},{"name":"ENV","lineno":5,"args":{"HAPROXY_URL":"https://www.haproxy.org/download/1.9/src/haproxy-1.9.14.tar.gz"},"raw":"ENV HAPROXY_URL https://www.haproxy.org/download/1.9/src/haproxy-1.9.14.tar.gz"},{"name":"ENV","lineno":6,"args":{"HAPROXY_SHA256":"d4bd6c58547cfd282feaef195d816b26145be19e494bf3486bb7187f7982296f"},"raw":"ENV HAPROXY_SHA256 d4bd6c58547cfd282feaef195d816b26145be19e494bf3486bb7187f7982296f"},{"name":"RUN","lineno":58,"args":"set -x \t\t&& savedAptMark=\"$(apt-mark showmanual)\" \t&& apt-get update && apt-get install -y --no-install-recommends \t\tca-certificates \t\tgcc \t\tlibc6-dev \t\tliblua5.3-dev \t\tlibpcre2-dev \t\tlibssl-dev \t\tmake \t\twget \t\tzlib1g-dev \t&& rm -rf /var/lib/apt/lists/* \t\t&& wget -O haproxy.tar.gz \"$HAPROXY_URL\" \t&& echo \"$HAPROXY_SHA256 *haproxy.tar.gz\" | sha256sum -c \t&& mkdir -p /usr/src/haproxy \t&& tar -xzf haproxy.tar.gz -C /usr/src/haproxy --strip-components=1 \t&& rm haproxy.tar.gz \t\t&& makeOpts=' \t\tTARGET=linux2628 \t\tUSE_GETADDRINFO=1 \t\tUSE_LUA=1 LUA_INC=/usr/include/lua5.3 \t\tUSE_OPENSSL=1 \t\tUSE_PCRE2=1 USE_PCRE2_JIT=1 \t\tUSE_ZLIB=1 \t\t\t\tEXTRA_OBJS=\" \t\t\" \t' \t&& nproc=\"$(nproc)\" \t&& eval \"make -C /usr/src/haproxy -j '$nproc' all $makeOpts\" \t&& eval \"make -C /usr/src/haproxy install-bin $makeOpts\" \t\t&& mkdir -p /usr/local/etc/haproxy \t&& cp -R /usr/src/haproxy/examples/errorfiles /usr/local/etc/haproxy/errors \t&& rm -rf /usr/src/haproxy \t\t&& apt-mark auto '.*' > /dev/null \t&& { [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; } \t&& find /usr/local -type f -executable -exec ldd '{}' ';' \t\t| awk '/=>/ { print $(NF-1) }' \t\t| sort -u \t\t| xargs -r dpkg-query --search \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -r apt-mark manual \t&& apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false","raw":"RUN set -x \t\t&& savedAptMark=\"$(apt-mark showmanual)\" \t&& apt-get update && apt-get install -y --no-install-recommends \t\tca-certificates \t\tgcc \t\tlibc6-dev \t\tliblua5.3-dev \t\tlibpcre2-dev \t\tlibssl-dev \t\tmake \t\twget \t\tzlib1g-dev \t&& rm -rf /var/lib/apt/lists/* \t\t&& wget -O haproxy.tar.gz \"$HAPROXY_URL\" \t&& echo \"$HAPROXY_SHA256 *haproxy.tar.gz\" | sha256sum -c \t&& mkdir -p /usr/src/haproxy \t&& tar -xzf haproxy.tar.gz -C /usr/src/haproxy --strip-components=1 \t&& rm haproxy.tar.gz \t\t&& makeOpts=' \t\tTARGET=linux2628 \t\tUSE_GETADDRINFO=1 \t\tUSE_LUA=1 LUA_INC=/usr/include/lua5.3 \t\tUSE_OPENSSL=1 \t\tUSE_PCRE2=1 USE_PCRE2_JIT=1 \t\tUSE_ZLIB=1 \t\t\t\tEXTRA_OBJS=\" \t\t\" \t' \t&& nproc=\"$(nproc)\" \t&& eval \"make -C /usr/src/haproxy -j '$nproc' all $makeOpts\" \t&& eval \"make -C /usr/src/haproxy install-bin $makeOpts\" \t\t&& mkdir -p /usr/local/etc/haproxy \t&& cp -R /usr/src/haproxy/examples/errorfiles /usr/local/etc/haproxy/errors \t&& rm -rf /usr/src/haproxy \t\t&& apt-mark auto '.*' > /dev/null \t&& { [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; } \t&& find /usr/local -type f -executable -exec ldd '{}' ';' \t\t| awk '/=>/ { print $(NF-1) }' \t\t| sort -u \t\t| xargs -r dpkg-query --search \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -r apt-mark manual \t&& apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false"},{"name":"STOPSIGNAL","lineno":64,"args":"SIGUSR1","raw":"STOPSIGNAL SIGUSR1"},{"name":"COPY","lineno":66,"args":["docker-entrypoint.sh","/"],"raw":"COPY docker-entrypoint.sh /"},{"name":"ENTRYPOINT","lineno":67,"args":["/docker-entrypoint.sh"],"raw":"ENTRYPOINT [\"/docker-entrypoint.sh\"]"},{"name":"CMD","lineno":68,"args":["haproxy","-f","/usr/local/etc/haproxy/haproxy.cfg"],"raw":"CMD [\"haproxy\", \"-f\", \"/usr/local/etc/haproxy/haproxy.cfg\"]"}]}