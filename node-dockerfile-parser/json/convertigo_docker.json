{"docker":[{"name":"FROM","lineno":19,"args":"openjdk:8-jre","raw":"FROM openjdk:8-jre"},{"name":"MAINTAINER","lineno":22,"args":"Nicolas Albert nicolasa@convertigo.com","raw":"MAINTAINER Nicolas Albert nicolasa@convertigo.com"},{"name":"ENV","lineno":24,"args":{"CATALINA_HOME":"/usr/local/tomcat"},"raw":"ENV CATALINA_HOME /usr/local/tomcat"},{"name":"RUN","lineno":25,"args":"mkdir -p \"$CATALINA_HOME\"","raw":"RUN mkdir -p \"$CATALINA_HOME\""},{"name":"WORKDIR","lineno":26,"args":"$CATALINA_HOME","raw":"WORKDIR $CATALINA_HOME"},{"name":"RUN","lineno":32,"args":"apt-get update -y && apt-get install -y --no-install-recommends     ca-certificates     curl     unzip   && rm -rf /var/lib/apt/lists/*","raw":"RUN apt-get update -y && apt-get install -y --no-install-recommends     ca-certificates     curl     unzip   && rm -rf /var/lib/apt/lists/*"},{"name":"RUN","lineno":50,"args":"export GNUPGHOME=\"$(mktemp -d)\"   && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4   && curl -o /usr/local/bin/gosu -fSL \"https://github.com/tianon/gosu/releases/download/1.7/gosu-$(dpkg --print-architecture)\"   && curl -o /usr/local/bin/gosu.asc -fSL \"https://github.com/tianon/gosu/releases/download/1.7/gosu-$(dpkg --print-architecture).asc\"   && gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu   && rm /usr/local/bin/gosu.asc   && chmod +x /usr/local/bin/gosu   && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys 6380DC428747F6C393FEACA59A84159D7001A4E5   && curl -o /usr/local/bin/tini -fSL \"https://github.com/krallin/tini/releases/download/v0.9.0/tini\"   && curl -o /usr/local/bin/tini.asc -fSL \"https://github.com/krallin/tini/releases/download/v0.9.0/tini.asc\"   && gpg --batch --verify /usr/local/bin/tini.asc /usr/local/bin/tini   && rm /usr/local/bin/tini.asc   && chmod +x /usr/local/bin/tini   && rm -rf /tmp/*","raw":"RUN export GNUPGHOME=\"$(mktemp -d)\"   && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4   && curl -o /usr/local/bin/gosu -fSL \"https://github.com/tianon/gosu/releases/download/1.7/gosu-$(dpkg --print-architecture)\"   && curl -o /usr/local/bin/gosu.asc -fSL \"https://github.com/tianon/gosu/releases/download/1.7/gosu-$(dpkg --print-architecture).asc\"   && gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu   && rm /usr/local/bin/gosu.asc   && chmod +x /usr/local/bin/gosu   && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys 6380DC428747F6C393FEACA59A84159D7001A4E5   && curl -o /usr/local/bin/tini -fSL \"https://github.com/krallin/tini/releases/download/v0.9.0/tini\"   && curl -o /usr/local/bin/tini.asc -fSL \"https://github.com/krallin/tini/releases/download/v0.9.0/tini.asc\"   && gpg --batch --verify /usr/local/bin/tini.asc /usr/local/bin/tini   && rm /usr/local/bin/tini.asc   && chmod +x /usr/local/bin/tini   && rm -rf /tmp/*"},{"name":"RUN","lineno":57,"args":"useradd -s /bin/false -m convertigo     && mkdir -p /workspace/lib /workspace/classes     && chown -R convertigo:convertigo /workspace","raw":"RUN useradd -s /bin/false -m convertigo     && mkdir -p /workspace/lib /workspace/classes     && chown -R convertigo:convertigo /workspace"},{"name":"ENV","lineno":63,"args":{"TOMCAT_MAJOR":"7"},"raw":"ENV TOMCAT_MAJOR=7"},{"name":"ENV","lineno":64,"args":{"TOMCAT_VERSION":"7.0.72"},"raw":"ENV TOMCAT_VERSION=7.0.72"},{"name":"ENV","lineno":66,"args":{"TOMCAT_TGZ_URL":"https://archive.apache.org/dist/tomcat/tomcat-$TOMCAT_MAJOR/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz"},"raw":"ENV TOMCAT_TGZ_URL https://archive.apache.org/dist/tomcat/tomcat-$TOMCAT_MAJOR/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz"},{"name":"ENV","lineno":68,"args":{"TOMCAT_GPG_KEYS":"05AB33110949707C93A279E3D3EFE6B686867BA6 07E48665A34DCAFAE522E5E6266191C37C037D42 47309207D818FFD8DCD3F83F1931D684307A10A5 541FBE7D8F78B25E055DDEE13C370389288584E7 61B832AC2F1C5A90F0F9B00A1C506407564C17A3 713DA88BE50911535FE716F5208B0AB1D63011C7 79F7026C690BAA50B92CD8B66A3AD3F4F22C4FED 9BA44C2621385CB966EBA586F72C284D731FABEE A27677289986DB50844682F8ACB77FC2E86E29AC A9C5DF4D22E99998D9875A5110C01C5A2F6059E7 DCFD35E0BF8CA7344752DE8B6FB21E8933C60243 F3A04C595DB5B6A5F1ECA43E3B7BBB100D811BBE F7DA48BB64BCB84ECBA7EE6935CD23C10D498E23"},"raw":"ENV TOMCAT_GPG_KEYS 05AB33110949707C93A279E3D3EFE6B686867BA6 07E48665A34DCAFAE522E5E6266191C37C037D42 47309207D818FFD8DCD3F83F1931D684307A10A5 541FBE7D8F78B25E055DDEE13C370389288584E7 61B832AC2F1C5A90F0F9B00A1C506407564C17A3 713DA88BE50911535FE716F5208B0AB1D63011C7 79F7026C690BAA50B92CD8B66A3AD3F4F22C4FED 9BA44C2621385CB966EBA586F72C284D731FABEE A27677289986DB50844682F8ACB77FC2E86E29AC A9C5DF4D22E99998D9875A5110C01C5A2F6059E7 DCFD35E0BF8CA7344752DE8B6FB21E8933C60243 F3A04C595DB5B6A5F1ECA43E3B7BBB100D811BBE F7DA48BB64BCB84ECBA7EE6935CD23C10D498E23"},{"name":"RUN","lineno":85,"args":"export GNUPGHOME=\"$(mktemp -d)\"     && for key in $TOMCAT_GPG_KEYS; do          gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\";        done;     curl -fSL -o /tmp/tomcat.tar.gz $TOMCAT_TGZ_URL     && curl -fSL -o /tmp/tomcat.tar.gz.asc $TOMCAT_TGZ_URL.asc     && gpg --batch --verify /tmp/tomcat.tar.gz.asc /tmp/tomcat.tar.gz     && tar -xvf /tmp/tomcat.tar.gz --strip-components=1     && sed -i.bak         -e '/protocol=\"AJP/d'         -e '/AprLifecycleListener/d'         -e '/JasperListener/d'         -e 's/port=\"8080\"/port=\"28080\" maxThreads=\"64000\"/'         conf/server.xml     && rm -rf webapps/* bin/*.bat conf/server.xml.bak /tmp/*     && chown -R convertigo:convertigo conf temp work logs     && chmod -w conf/*","raw":"RUN export GNUPGHOME=\"$(mktemp -d)\"     && for key in $TOMCAT_GPG_KEYS; do          gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\";        done;     curl -fSL -o /tmp/tomcat.tar.gz $TOMCAT_TGZ_URL     && curl -fSL -o /tmp/tomcat.tar.gz.asc $TOMCAT_TGZ_URL.asc     && gpg --batch --verify /tmp/tomcat.tar.gz.asc /tmp/tomcat.tar.gz     && tar -xvf /tmp/tomcat.tar.gz --strip-components=1     && sed -i.bak         -e '/protocol=\"AJP/d'         -e '/AprLifecycleListener/d'         -e '/JasperListener/d'         -e 's/port=\"8080\"/port=\"28080\" maxThreads=\"64000\"/'         conf/server.xml     && rm -rf webapps/* bin/*.bat conf/server.xml.bak /tmp/*     && chown -R convertigo:convertigo conf temp work logs     && chmod -w conf/*"},{"name":"ENV","lineno":88,"args":{"CONVERTIGO_VERSION":"7.4.3"},"raw":"ENV CONVERTIGO_VERSION=7.4.3"},{"name":"ENV","lineno":89,"args":{"CONVERTIGO_REVISION":"42669"},"raw":"ENV CONVERTIGO_REVISION=42669"},{"name":"ENV","lineno":91,"args":{"CONVERTIGO_WAR_URL":"https://devplatform.s3.amazonaws.com/refbin/cems/$CONVERTIGO_VERSION/convertigo-$CONVERTIGO_VERSION-v$CONVERTIGO_REVISION-linux64.war"},"raw":"ENV CONVERTIGO_WAR_URL https://devplatform.s3.amazonaws.com/refbin/cems/$CONVERTIGO_VERSION/convertigo-$CONVERTIGO_VERSION-v$CONVERTIGO_REVISION-linux64.war"},{"name":"ENV","lineno":93,"args":{"CONVERTIGO_GPG_KEYS":"6A7779BB78FE368DF74B708FD4DA8FBEB64BF75F"},"raw":"ENV CONVERTIGO_GPG_KEYS 6A7779BB78FE368DF74B708FD4DA8FBEB64BF75F"},{"name":"RUN","lineno":107,"args":"export GNUPGHOME=\"$(mktemp -d)\"     && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$CONVERTIGO_GPG_KEYS\"     && curl -fSL -o /tmp/convertigo.war $CONVERTIGO_WAR_URL     && curl -fSL -o /tmp/convertigo.war.asc $CONVERTIGO_WAR_URL.asc     && gpg --batch --verify /tmp/convertigo.war.asc /tmp/convertigo.war     && mkdir webapps/ROOT webapps/convertigo     && (cd webapps/convertigo         && unzip -q /tmp/convertigo.war         && rm -rf WEB-INF/xulrunner WEB-INF/xvnc WEB-INF/lib/swt_* /tmp/*)","raw":"RUN export GNUPGHOME=\"$(mktemp -d)\"     && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$CONVERTIGO_GPG_KEYS\"     && curl -fSL -o /tmp/convertigo.war $CONVERTIGO_WAR_URL     && curl -fSL -o /tmp/convertigo.war.asc $CONVERTIGO_WAR_URL.asc     && gpg --batch --verify /tmp/convertigo.war.asc /tmp/convertigo.war     && mkdir webapps/ROOT webapps/convertigo     && (cd webapps/convertigo         && unzip -q /tmp/convertigo.war         && rm -rf WEB-INF/xulrunner WEB-INF/xvnc WEB-INF/lib/swt_* /tmp/*)"},{"name":"COPY","lineno":112,"args":["./web-connector/root-index.html","webapps/ROOT/index.html"],"raw":"COPY ./web-connector/root-index.html webapps/ROOT/index.html"},{"name":"COPY","lineno":113,"args":["./web-connector/docker-entrypoint.sh","/"],"raw":"COPY ./web-connector/docker-entrypoint.sh /"},{"name":"WORKDIR","lineno":116,"args":"/workspace","raw":"WORKDIR /workspace"},{"name":"VOLUME","lineno":117,"args":["/workspace"],"raw":"VOLUME [\"/workspace\"]"},{"name":"EXPOSE","lineno":118,"args":["28080"],"raw":"EXPOSE 28080"},{"name":"ENTRYPOINT","lineno":120,"args":["tini","--","/docker-entrypoint.sh"],"raw":"ENTRYPOINT [\"tini\", \"--\", \"/docker-entrypoint.sh\"]"},{"name":"CMD","lineno":121,"args":["convertigo"],"raw":"CMD [\"convertigo\"]"}]}